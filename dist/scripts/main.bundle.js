!function(t){function n(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var i={};n.m=t,n.c=i,n.d=function(t,i,e){n.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:e})},n.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,i){i(1),t.exports=i(9)},function(t,n,i){"use strict";var e=function(t){return t&&t.__esModule?t:{default:t}}(i(2)),a=new e.default;document.addEventListener("DOMContentLoaded",a.init.bind(a),!1)},function(t,n,i){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),s=e(i(3)),o=e(i(6)),r=e(i(7)),c=i(8),u=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.transitionsPaused=!1,this.transitionsDone=0,this.clockTime=4,this.contentTime=5,this.musicManager=new s.default,this.background=new o.default,this.foreground=new r.default,this.updateIntervalId=null}return a(t,[{key:"init",value:function(){document.addEventListener("blur",this.setTransitionsPaused.bind(this,!0),!1),document.addEventListener("focus",this.setTransitionsPaused.bind(this,!1),!1),this.musicManager.init(),this.background.init(),this.foreground.init(),this.updateScreen(),this.updateIntervalId=setInterval(this.updateScreen.bind(this),1e3)}},{key:"setTransitionsPaused",value:function(t){this.transitionsPaused=t}},{key:"updateScreen",value:function(){var t=new Date,n=(0,c.getTimeOfDay)(t),i=this.getDisplayProperties(n),e=n===c.timesOfDay.night;this.musicManager.triggerMusic(e),this.transitionsDone===this.clockTime+this.contentTime&&(this.transitionsDone=0,this.transitionsPaused=!1),this.transitionsPaused||(this.transitionsDone===this.clockTime?(this.transitionsPaused=!0,i.backgroundColor="clear",this.foreground.clear()):0===this.transitionsDone?this.foreground.renderAnimated(i,(0,c.getFormattedTime)(t),this.background.getBackgroundPosition()):this.foreground.render(i,(0,c.getFormattedTime)(t)),e?this.background.renderStatic(i.backgroundColor):this.background.renderAnimated(i.backgroundColor)),this.transitionsDone=this.transitionsDone+1}},{key:"getDisplayProperties",value:function(t){var n=void 0,i=void 0;switch(t){case c.timesOfDay.morning:n="#568BDD";break;case c.timesOfDay.afternoon:n="#145ECF";break;case c.timesOfDay.evening:n="#285EB0";break;case c.timesOfDay.night:n="#0C387C";break;default:n="#145ECF"}if([0,2].indexOf(this.background.getBackgroundPosition())>=0)i="#FFFFFF";else switch(t){case c.timesOfDay.afternoon:i="#145ECF";break;case c.timesOfDay.evening:i="#285EB8";break;default:i="#568BDD"}return{textColor:i,backgroundColor:n}}},{key:"tearDown",value:function(){clearInterval(this.updateIntervalId),this.background.tearDown(),this.foreground.tearDown(),this.musicManager.tearDown()}}]),t}();n.default=u},function(t,n,i){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),s=e(i(4)),o=e(i(5)),r=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.tracks={},this.audioPlaying=!1}return a(t,[{key:"init",value:function(){this.initAudioTracks(),document.getElementById("musicToggle").addEventListener("click",this.toggleAudioPlaying.bind(this),!1)}},{key:"initAudioTracks",value:function(){var t=this;[{name:"day",filePath:s.default},{name:"night",filePath:o.default}].forEach(function(n){t.tracks[n.name]=document.createElement("audio"),t.tracks[n.name].src=n.filePath,t.tracks[n.name].preload="none",t.tracks[n.name].loop=!0})}},{key:"toggleAudioPlaying",value:function(){var t=this;Object.keys(this.tracks).forEach(function(n){t.audioPlaying?(t.tracks[n].pause(),t.tracks[n].currentTime=0):(t.tracks[n].muted=!0,t.tracks[n].play())}),this.audioPlaying=!this.audioPlaying}},{key:"triggerMusic",value:function(t){this.audioPlaying&&(t&&this.tracks.night.readyState>=3?(this.tracks.day.pause(),this.tracks.night.muted&&(this.tracks.night.currentTime=0,this.tracks.night.muted=!1),this.tracks.night.play()):this.tracks.day.readyState>=3&&(this.tracks.night.pause(),this.tracks.day.muted&&(this.tracks.day.currentTime=0,this.tracks.day.muted=!1),this.tracks.day.play()))}},{key:"tearDown",value:function(){document.getElementById("musicToggle").removeEventListener("click",this.toggleAudioPlaying.bind(this),!1)}}]),t}();n.default=r},function(t,n,i){t.exports=i.p+"sounds/unitock.mp3"},function(t,n,i){t.exports=i.p+"sounds/unitocknight.mp3"},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),a=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvasContext=null,this.canvasDimensions=null,this.animationSpeeds=null,this.backgroundLocation={x:0,y:0},this.backgroundPosition=0}return e(t,[{key:"init",value:function(){this.canvasContext=document.getElementById("clockBackground").getContext("2d"),this.initCanvas(),window.addEventListener("resize",this.initCanvas.bind(this),!1)}},{key:"initCanvas",value:function(){var t=window.devicePixelRatio||1;this.canvasDimensions={width:window.innerWidth,height:window.innerHeight},this.animationSpeeds={x:this.canvasDimensions.width/60*4,y:this.canvasDimensions.height/60*4};var n=this.canvasContext.canvas;n.width=this.canvasDimensions.width*t,n.height=this.canvasDimensions.height*t,n.style.width=this.canvasDimensions.width+"px",n.style.height=this.canvasDimensions.height+"px",this.canvasContext.scale(t,t)}},{key:"getBackgroundPosition",value:function(){return this.backgroundPosition}},{key:"renderStatic",value:function(t){this.renderBackground(t,{x:0,y:0})}},{key:"clearBackground",value:function(t){this.canvasContext.clearRect(t.x,t.y,this.canvasDimensions.width,this.canvasDimensions.height)}},{key:"renderBackground",value:function(t,n){"clear"===t?this.clearBackground(this.backgroundLocation):(this.canvasContext.fillStyle=[0,2].indexOf(this.backgroundPosition)>=0?t:"#fff",this.canvasContext.fillRect(n.x,n.y,this.canvasDimensions.width,this.canvasDimensions.height))}},{key:"updateBackgroundLocation",value:function(){[1,3].indexOf(this.backgroundPosition)>=0?this.backgroundLocation={x:this.canvasDimensions.width*(1===this.backgroundPosition?-1:1),y:0}:this.backgroundLocation={x:0,y:this.canvasDimensions.height*(0===this.backgroundPosition?1:-1)}}},{key:"renderAnimated",value:function(t){this.updateBackgroundLocation(),requestAnimationFrame(this.animateBackground.bind(this,t))}},{key:"animateBackground",value:function(t){var n=[0,2].indexOf(this.backgroundPosition)>=0?"y":"x",i=this.animationSpeeds[n],e=!0;this.renderBackground(t,this.backgroundLocation),[0,3].indexOf(this.backgroundPosition)>=0?(this.backgroundLocation[n]-=i,this.backgroundLocation[n]<=-i&&(this.backgroundPosition=0===this.backgroundPosition?1:0,e=!1)):(this.backgroundLocation[n]+=i,this.backgroundLocation[n]>=i&&(this.backgroundPosition=this.backgroundPosition+1,e=!1)),e&&requestAnimationFrame(this.animateBackground.bind(this,t))}},{key:"tearDown",value:function(){this.canvasContext.clearRect(0,0,this.canvasDimensions.width,this.canvasDimensions.height),window.removeEventListener("resize",this.initCanvas.bind(this),!1)}}]),t}();n.default=a},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),a=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvasContext=null,this.canvasDimensions=null,this.canvasAnimationOffset=100}return e(t,[{key:"init",value:function(){this.canvasContext=document.getElementById("clockTime").getContext("2d"),this.initCanvas(),window.addEventListener("resize",this.initCanvas.bind(this),!1)}},{key:"initCanvas",value:function(){var t=window.devicePixelRatio||1;this.canvasDimensions={width:window.innerWidth,height:window.innerHeight},this.animationSpeeds={x:this.canvasDimensions.width/60*2,y:this.canvasDimensions.height/60*2};var n=this.canvasContext.canvas;n.width=this.canvasDimensions.width*t,n.height=this.canvasDimensions.height*t,n.style.width=this.canvasDimensions.width+"px",n.style.height=this.canvasDimensions.height+"px",this.canvasContext.scale(t,t)}},{key:"clear",value:function(){this.canvasContext.clearRect(0,0,this.canvasDimensions.width,this.canvasDimensions.height)}},{key:"updateCanvasPosition",value:function(t){var n=[1,2].indexOf(t)>=0?"-"+this.canvasAnimationOffset:""+this.canvasAnimationOffset,i=[0,2].indexOf(t)>=0?"top":"left";document.getElementById("clockTime").style[i]=n+"%"}},{key:"renderAnimated",value:function(t,n,i){this.canvasAnimationOffset=100,this.render(t,n),this.updateCanvasPosition(i),requestAnimationFrame(this.animateForeground.bind(this,i))}},{key:"animateForeground",value:function(t){this.canvasAnimationOffset=this.canvasAnimationOffset-5,this.updateCanvasPosition(t),this.canvasAnimationOffset>0&&requestAnimationFrame(this.animateForeground.bind(this,t))}},{key:"render",value:function(t,n){var i=t.backgroundColor,e=t.textColor;document.getElementById("musicToggle").style.backgroundColor=i,document.body.style.backgroundColor=i,this.clear(),this.canvasContext.fillStyle=e,this.canvasContext.font="bold 95px Arial",this.canvasContext.textAlign="center",this.canvasContext.fillText(n,this.canvasDimensions.width/2,this.canvasDimensions.height/2),this.canvasContext.font="45px Arial",this.canvasContext.fillText("samrum",this.canvasDimensions.width/2,this.canvasDimensions.height/2+60)}},{key:"tearDown",value:function(){this.canvasContext.clearRect(0,0,this.canvasDimensions.width,this.canvasDimensions.height),window.removeEventListener("resize",this.initCanvas.bind(this),!1)}}]),t}();n.default=a},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getTimeOfDay=function(t){var n=(t||new Date).getHours(),i=e.evening;return n<6||n>22?i=e.night:n<11?i=e.morning:n>10&&n<18&&(i=e.afternoon),i},n.getFormattedTime=function(t){var n=t||new Date,i=n.getHours(),e=n.getMinutes(),a=n.getSeconds();return 0===i?i=12:i>12&&(i-=12),e<10&&(e="0"+e),a<10&&(a="0"+a),i+" "+e+" "+a};var e=n.timesOfDay={morning:0,afternoon:1,evening:2,night:3}},function(t,n){}]);
//# sourceMappingURL=main.bundle.js.map